(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{3664:function(e,t,d){(window.__NEXT_P=window.__NEXT_P||[]).push(["/claim-dividends",function(){return d(6766)}])},6766:function(e,t,d){"use strict";d.r(t),d.d(t,{default:function(){return S}});var n=d(5893),a=d(5067),i=d(4085),r=d(8924),s=d(7294),l=d(9473);let o=()=>{let e=(0,l.I0)(),{showToast:t}=(0,r.d$)(),d=(0,l.v9)(i._r),n=(0,l.v9)(i.KU),a=(0,l.v9)(i.Sg),o=(0,l.v9)(i.w2);s.useEffect(()=>{e(i.Mk.initRequested())},[]),s.useEffect(()=>{a==i.hJ.ClaimDividendFailed?t({status:"error",message:o}):a==i.hJ.ClaimDividendSucceeded&&(t({status:"success",message:"Claim dividend successful"}),e(i.Mk.initRequested()))},[a]);let c=()=>{console.log("handle buy nft"),e(i.Mk.claimDividendRequested())};return{status:a,userTotalUsdClaimableDividend:d,userTotalUsdClaimedDividend:n,handleClaimDividends:c}};var c=d(4345),h=d.n(c);let m=()=>{let{status:e,userTotalUsdClaimableDividend:t,userTotalUsdClaimedDividend:d,handleClaimDividends:a}=o(),r=e=>{e.preventDefault(),a()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("form",{className:[h().form,"mBackground-style-1"].join(" "),children:(0,n.jsxs)("div",{className:h()["form-body"],children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"Available (Claimable)"}),(0,n.jsxs)("p",{children:[e==i.hJ.Loading?"- -":e==i.hJ.LoadingFailed?"N/A":t/1e6," ","US$"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"Value (Claimed)"}),(0,n.jsxs)("p",{children:[e==i.hJ.Loading?"- -":e==i.hJ.LoadingFailed?"N/A":d/1e6," ","US$"]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{className:[h()["button-claim-dividends"],"mButton","mButton-cp5-bn1"].join(" "),onClick:r,disabled:e==i.hJ.Loading||e==i.hJ.LoadingFailed||e==i.hJ.ClaimingDividend||0==t,children:e==i.hJ.Loading?"Loading...":e==i.hJ.ClaimingDividend?"Processing...":"Claim"})})]})})})};var u=d(381),j=d.n(u),x=d(2331),v=d.n(x);let f=()=>{let e=(0,l.I0)(),t=(0,l.v9)(i.$h),d=(0,l.v9)(i.Sg);return s.useEffect(()=>{e(i.Mk.initRequested())},[]),{status:d,userDividensData:t}},p=()=>{let{status:e,userDividensData:t}=f();return(0,n.jsx)("div",{className:v()["table-wrapper"],children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{"data-name":"id",children:"ID"}),(0,n.jsx)("th",{"data-name":"project",children:"PROJECT"}),(0,n.jsx)("th",{"data-name":"from",children:"FROM"}),(0,n.jsx)("th",{"data-name":"to",children:"TO"}),(0,n.jsx)("th",{"data-name":"amount-nft",children:"AMOUNT NFT"}),(0,n.jsx)("th",{"data-name":"amount-dividend",children:"AMOUNT DIVIDEND"}),(0,n.jsx)("th",{"data-name":"status",children:"STATUS"})]})}),(0,n.jsx)("tbody",{children:e!=i.hJ.Loading&&(null==t?void 0:t.length)>0?t.map(e=>{let{id:t,project:d,dateFrom:a,dateTo:i,nft:r,dividend:s,status:l}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{"data-name":"id",children:["#",t]}),(0,n.jsx)("td",{"data-name":"project",children:d}),(0,n.jsx)("td",{"data-name":"from",children:a&&j()(a).format("DD - MM - YYYY")}),(0,n.jsx)("td",{"data-name":"to",children:i&&j()(i).format("DD - MM - YYYY")}),(0,n.jsx)("td",{"data-name":"amount-nft",children:r}),(0,n.jsxs)("td",{"data-name":"amount-dividend",children:[s/1e6," US$"]}),(0,n.jsx)("td",{"data-name":"status","data-value":l,children:l})]},t)}):e==i.hJ.Loading?(0,n.jsx)("tr",{"data-type":"empty-row",children:(0,n.jsx)("td",{colSpan:7,children:"Loading..."})}):(0,n.jsx)("tr",{"data-type":"empty-row",children:(0,n.jsx)("td",{colSpan:7,children:"No transaction yet"})})})]})})};var y=d(1664),N=d.n(y),_=d(7152),T=d.n(_);let g=BigInt(1e6),F=()=>{let e=(0,l.I0)(),t=(0,l.v9)(i.$h),d=(0,l.v9)(i.Sg),[n,a]=s.useState([]),[r,o]=s.useState([]),[c,h]=s.useState([]),[m,u]=s.useState([]),[x,v]=s.useState({year:void 0,month:void 0});s.useEffect(()=>{e(i.Mk.initRequested())},[]),s.useEffect(()=>{t&&t.length>0&&f(t)},[t]),s.useEffect(()=>{n&&n.length>0&&p(n)},[n]),s.useEffect(()=>{void 0!=x.year&&void 0===x.month?N(n,x.year):void 0!=x.year&&void 0!=x.month&&y(n,x.month,x.year)},[x]);let f=e=>{let t;let d=(e,t)=>{let d=j()(new Date(e.year(),e.month()-1,e.date())),n=j()(new Date(t.year(),t.month()-1,t.date()));return d<n?1:d.year()===n.year()&&d.month()===n.month()&&d.date()===n.date()?0:-1},n=[...e].sort((e,t)=>((null==t?void 0:t.dateFrom)||0)-(e.dateFrom||0)>0?-1:1);if(n&&0===n.length)return[];let i=j()(n[0].dateFrom),r=j()(n[n.length-1].dateTo),s=((e,t)=>{let n=[],a=e.add(1,"day");for(;;)if(-1!==d(a,t))n.push({dateFrom:j()(new Date(a.year(),a.month(),a.date())).valueOf(),dividenId:"",id:"",dateTo:j()(new Date(a.year(),a.month(),a.date())).valueOf(),project:"",dividend:0,nft:0,dividendPerNFT:0,status:"available"}),a.add(1,"day");else break;return n})(i,r);return s.forEach((e,a)=>{t=n.find((t,n)=>{let a=1===d(j()(t.dateFrom),j()(e.dateFrom)),i=-1!==d(j()(e.dateFrom),j()(t.dateTo));return a&&i}),e.dividenId=(null==t?void 0:t.dividenId)||"",e.id=(null==t?void 0:t.id)||"",e.project=(null==t?void 0:t.project)||"",e.dividend=Number(BigInt((null==t?void 0:t.dividend)||0)*BigInt(100)/g)/100,e.nft=(null==t?void 0:t.nft)||0,e.dividendPerNFT=Number(BigInt((null==t?void 0:t.dividendPerNFT)||0)*BigInt(100)/g)/100,e.status=(null==t?void 0:t.status)||"unknown"}),a(s),s},p=e=>{let t=[];if(e&&0===e.length)return t;let d=[];return e.forEach((e,t)=>{let n=j()(e.dateFrom).year();-1===d.indexOf(n)&&d.push(n)}),d.forEach((d,n)=>{let a={year:d,project:"",dividend:0,nftMin:e[0].nft,nftMax:e[0].nft,dividendPerNFTMin:e[0].dividendPerNFT,dividendPerNFTMax:e[0].dividendPerNFT,status:""};e.forEach((e,t)=>{j()(e.dateFrom).year()===d&&(a.dividend+=e.dividend||0,a.project=e.project,a.nftMin>e.nft&&(a.nftMin=e.nft),a.nftMax<e.nft&&(a.nftMax=e.nft),a.dividendPerNFTMin>e.dividendPerNFT&&(a.dividendPerNFTMin=e.dividendPerNFT),a.dividendPerNFTMax<e.dividendPerNFT&&(a.dividendPerNFTMax=e.dividendPerNFT))}),t.push(a)}),o(t),t},y=(e,t,d)=>{if(e&&0===e.length)return[];let n=e.filter((e,n)=>j()(e.dateFrom).year()==d&&j()(e.dateFrom).month()==t);return u(n),n},N=(e,t)=>{if(e&&0===e.length)return[];let d=e.filter((e,d)=>j()(e.dateFrom).year()==t),n=[];if(d&&0===d.length)return n;let a=[];return d.forEach((e,t)=>{let d=j()(e.dateFrom).month();-1===a.indexOf(d)&&a.push(d)}),a.forEach((e,t)=>{let a={year:e,project:"",dividend:0,nftMin:d[0].nft,nftMax:d[0].nft,dividendPerNFTMin:d[0].dividendPerNFT,dividendPerNFTMax:d[0].dividendPerNFT,status:""};d.forEach((t,d)=>{j()(t.dateFrom).month()===e&&(a.dividend+=t.dividend||0,a.project=t.project,a.nftMin>t.nft&&(a.nftMin=t.nft),a.nftMax<t.nft&&(a.nftMax=t.nft),a.dividendPerNFTMin>t.dividendPerNFT&&(a.dividendPerNFTMin=t.dividendPerNFT),a.dividendPerNFTMax<t.dividendPerNFT&&(a.dividendPerNFTMax=t.dividendPerNFT))}),n.push(a)}),h(n),n};return{status:d,userDividensData:t,yearUserDividend:r,dividendDataInDetail:n,dividendDataInDetailByYear:c,dividendDataInDetailWithSpecificMonth:m,criteria:x,setCriteria:v}},M=e=>{let{status:t,yearUserDividend:d,criteria:a,setCriteria:r}=e;return(0,n.jsx)("div",{className:T().user_dividend_wrapper,children:(0,n.jsx)("div",{className:T()["table-dividend-history-wrapper"],children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{"data-name":"from",children:"YEAR"}),(0,n.jsx)("th",{"data-name":"project",children:"PROJECT"}),(0,n.jsx)("th",{"data-name":"amount-nft",children:"AMOUNT NFT (In Range)"}),(0,n.jsx)("th",{"data-name":"amount-nft",children:"NFT PRICE (In Range)"}),(0,n.jsx)("th",{"data-name":"amount-dividend",children:"AMOUNT DIVIDEND"})]})}),(0,n.jsx)("tbody",{children:t!=i.hJ.Loading&&d&&d.length>0?d.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{"data-name":"from",children:(0,n.jsx)(N(),{href:"",onClick(){r({...a,year:e.year})},children:e.year})}),(0,n.jsx)("td",{"data-name":"project",children:e.project}),(0,n.jsx)("td",{"data-name":"amount-nft",children:"".concat(e.nftMin," ~ ").concat(e.nftMax)}),(0,n.jsx)("td",{"data-name":"amount-nft",children:"".concat(e.dividendPerNFTMin," ~ ").concat(e.dividendPerNFTMax)}),(0,n.jsxs)("td",{"data-name":"amount-dividend",children:[e.dividend," US$"]})]},t)):t==i.hJ.Loading?(0,n.jsx)("tr",{"data-type":"empty-row",children:(0,n.jsx)("td",{colSpan:6,children:"Loading..."})}):(0,n.jsx)("tr",{"data-type":"empty-row",children:(0,n.jsx)("td",{colSpan:6,children:"No transaction yet"})})})]})})})},b=e=>{let{status:t,data:d,criteria:a,setCriteria:r}=e;return(0,n.jsxs)("div",{className:T().user_dividend_wrapper,children:[(0,n.jsxs)("button",{className:[T().button_1,"mButton mButton-cn1-bp5"].join(" "),onClick(){r({month:void 0,year:void 0})},children:[(0,n.jsx)("i",{className:"fml fm-arrow-left"}),"Back to year listing"]}),(0,n.jsx)("div",{className:T()["table-dividend-history-wrapper"],children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{"data-name":"from",children:"MONTH"}),(0,n.jsx)("th",{"data-name":"project",children:"PROJECT"}),(0,n.jsx)("th",{"data-name":"amount-nft",children:"AMOUNT NFT (In Range)"}),(0,n.jsx)("th",{"data-name":"amount-nft",children:"NFT PRICE (In Range)"}),(0,n.jsx)("th",{"data-name":"amount-dividend",children:"AMOUNT DIVIDEND"})]})}),(0,n.jsx)("tbody",{children:t!=i.hJ.Loading&&d&&d.length>0?d.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{"data-name":"from",children:(0,n.jsx)(N(),{href:"",onClick(){r({...a,month:e.year})},children:e.year+1})}),(0,n.jsx)("td",{"data-name":"project",children:e.project}),(0,n.jsx)("td",{"data-name":"amount-nft",children:"".concat(e.nftMin," ~ ").concat(e.nftMax)}),(0,n.jsx)("td",{"data-name":"amount-nft",children:"".concat(e.dividendPerNFTMin," ~ ").concat(e.dividendPerNFTMax)}),(0,n.jsxs)("td",{"data-name":"amount-dividend",children:[e.dividend," US$"]})]},t)):t==i.hJ.Loading?(0,n.jsx)("tr",{"data-type":"empty-row",children:(0,n.jsx)("td",{colSpan:6,children:"Loading..."})}):(0,n.jsx)("tr",{"data-type":"empty-row",children:(0,n.jsx)("td",{colSpan:6,children:"No transaction yet"})})})]})})]})},P=e=>{let{status:t,dividendDataInDetailWithSpecificMonth:d,setCriteria:a,criteria:r}=e;return(0,n.jsxs)("div",{className:T().user_dividend_wrapper,children:[(0,n.jsxs)("button",{className:[T().button_1,"mButton mButton-cn1-bp5"].join(" "),onClick(){a({...r,month:void 0})},children:[(0,n.jsx)("i",{className:"fml fm-arrow-left"}),"Back to month listing"]}),(0,n.jsx)("div",{className:T()["table-dividend-history-wrapper"],children:(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{"data-name":"from",children:"DATE"}),(0,n.jsx)("th",{"data-name":"project",children:"PROJECT"}),(0,n.jsx)("th",{"data-name":"amount-nft",children:"AMOUNT NFT"}),(0,n.jsx)("th",{"data-name":"amount-dividend",children:"AMOUNT DIVIDEND"}),(0,n.jsx)("th",{"data-name":"status",children:"STATUS"})]})}),(0,n.jsx)("tbody",{children:t!=i.hJ.Loading&&(null==d?void 0:d.length)>0?d.map((e,t)=>{let{id:d,project:a,dateFrom:i,dateTo:r,nft:s,dividend:l,status:o}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{"data-name":"from",children:i&&j()(i).format("DD - MM - YYYY")}),(0,n.jsx)("td",{"data-name":"project",children:a}),(0,n.jsx)("td",{"data-name":"amount-nft",children:s}),(0,n.jsxs)("td",{"data-name":"amount-dividend",children:[l," US$"]}),(0,n.jsx)("td",{"data-name":"status","data-value":o,children:o})]},t)}):t==i.hJ.Loading?(0,n.jsx)("tr",{"data-type":"empty-row",children:(0,n.jsx)("td",{colSpan:6,children:"Loading..."})}):(0,n.jsx)("tr",{"data-type":"empty-row",children:(0,n.jsx)("td",{colSpan:6,children:"No transaction yet"})})})]})})]})},w=()=>{let{status:e,dividendDataInDetailByYear:t,criteria:d,dividendDataInDetailWithSpecificMonth:a,yearUserDividend:i,setCriteria:r}=F();return(0,n.jsx)(n.Fragment,{children:void 0===d.year&&void 0===d.month?(0,n.jsx)(M,{status:e,yearUserDividend:i,setCriteria:r,criteria:d}):void 0!=d.year&&void 0===d.month?(0,n.jsx)(b,{status:e,data:t,criteria:d,setCriteria:r}):(0,n.jsx)(P,{status:e,dividendDataInDetailWithSpecificMonth:a,setCriteria:r,criteria:d})})};var D=d(4499),E=d.n(D);let I=()=>(0,n.jsxs)("div",{className:E().container,children:[(0,n.jsx)("h2",{className:E().title,children:"Claim Dividends"}),(0,n.jsx)("div",{className:E()["form-buy-nft-placeholder"],style:{marginBottom:"30px"},children:(0,n.jsx)(m,{})}),(0,n.jsx)("h2",{className:E().title,children:"Claim Dividends History"}),(0,n.jsx)("div",{className:E()["table-claim-dividends-history-placeholder"],children:(0,n.jsx)(p,{})}),(0,n.jsx)("br",{}),(0,n.jsx)("h2",{className:E().title,children:"User Dividends History - In detail"}),(0,n.jsx)("div",{className:E()["table-claim-dividends-history-placeholder"],children:(0,n.jsx)(w,{})})]});I.getLayout=function(e){return(0,n.jsx)(a.lq,{children:e})};var S=I},4345:function(e){e.exports={form:"styles_form__tI2Po","form-header":"styles_form-header__mT71g","form-title":"styles_form-title__TABnc","form-body":"styles_form-body__HapY8","form-group":"styles_form-group__tPJRS","button-claim-dividends":"styles_button-claim-dividends__BLLeO"}},7152:function(e){e.exports={user_dividend_wrapper:"styles_user_dividend_wrapper__P8qtP",button_1:"styles_button_1__P72PF","table-dividend-history-wrapper":"styles_table-dividend-history-wrapper__yV_Xt"}},2331:function(e){e.exports={"table-wrapper":"styles_table-wrapper__hIUsI"}},4499:function(e){e.exports={container:"styles_container__a3YRw",title:"styles_title__cKoH3","table-claim-dividends-history-placeholder":"styles_table-claim-dividends-history-placeholder__T2CeK"}}},function(e){e.O(0,[885,206,168,774,888,179],function(){return e(e.s=3664)}),_N_E=e.O()}]);